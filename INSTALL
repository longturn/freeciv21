=====================
Installing Freeciv21:
=====================

This file describes how to compile and install Freeciv21. Last time we made sure this file is up to date was 14-Feb-21. Last major
update was 14-Feb-21.

This document contains sections and subsections as follows:
     0. Prerequisites:
     1. Prerequisites for the Qt client:
     2. Compiling and Installing Freeciv21:
     3. Debian Notes:
     4. Windows Notes:


0. Prerequisites:
=================

Freeciv21 has a number of prerequisites.  Note, that apart from the first prerequisite, the Freeciv21 configuration process is smart
enough to work out whether your system is suitable.  If in doubt, just try it.

 - An operating system that support Qt.

Any modern operating system that support Qt is required. As of this writing this is Linux, Windows and Mac OS X. On Windows both
Msys2 and Cygwin are supported. However, Msys2 is more supported by the Freeciv21 team.

 - A C and C++ 14 compiler.

Freeciv21 is written in very portable C and C++.  Both 32- and 64-bit machines are supported.  You cannot use a "K&R
C" compiler, or a C++ compiler. The C++ compiler must support C++ 14.

Development of Freeciv21 is primarily done with "gcc", the GNU project's excellent C and C++ compiler. Windows MS Visual C support
is under development.

 - A "cmake" program.

   Freeciv21 developers generally use "cmake", the Kitware make program.

   You can check if you have GNU make installed on your system by typing:

       % cmake --version

   The output should include "Kitware cmake" somewhere and the version should be >=3.12.

 - Ninja cmake build program

 - libtool version 2.2 or better

 - libsqlite3

   http://www.sqlite.org/

   The git version has additional requirements. A release version contains the generated files.

 - The programs from GNU gettext version 0.15 or better

   Especially the xgettext program is required to create the *.gmo files which aren't included in the git tree.

 - libkf5aarchive

 - libSDL2 Mixer

 - python3


1. Prerequisites for the Qt client:
===================================

The Freeciv21 project maintains a single Qt client.

 - C++ compiler.

Qt-client is written in C++, so you need appropriate compiler. In Freeciv21 development, g++ has been used.

 - Qt5Core, Qt5Gui, and Qt5Widgets libraries and headers. At least version 5.11 is required.


2. Compiling and Installing Freeciv21:
======================================

Compiling Freeciv21 requires the use of the cmake program. To build with defaults enter the following commmand from the freeciv21
directory:

   cmake . -B build -G Ninja

To customize the compile, cmake requires the use of command line parameters.  cmake calls them directives and they start with -D.

  -DFREECIV_ENABLE_TOOLS={ON/OFF}     -- Enables all the tools with one parameter (Ruledit, FCMP, Ruleup, and Manual)
  -DFREECIV_ENABLE_SERVER={ON/OFF}    -- Enables the server. Should typically set to YES to be able to play AI games
  -DFREECIV_ENABLE_NLS={ON/OFF}       -- Enables Native Language Support
  -DFREECIV_ENABLE_CIVMANUAL={ON/OFF} -- Enables the Freeciv Manual application
  -DFREECIV_ENABLE_CLIENT={ON/OFF}    -- Enables the Qt client. Should typically set to YES unless you only want the server
  -DFREECIV_ENABLE_FCMP_CLI={ON/OFF}  -- Enables the command line version of the Freeciv21 Modpack Installer
  -DFREECIV_ENABLE_FCMP_QT={ON/OFF}   -- Enables the Qt version of the Freeciv21 Modpack Installer (recommended)
  -DFREECIV_ENABLE_RULEDIT={ON/OFF}   -- Enables the Ruleset Editor
  -DFREECIV_ENABLE_RULEUP={ON/OFF}    -- Enables the Ruleset upgrade tool
  -DCMAKE_BUILD_TYPE={Release/Debug}  -- Changes the Build Type. Most people will pick Release
  -DCMAKE_INSTALL_PREFIX=/some/path   -- Allows an alternative install path. Default is /usr/local/share/freeciv21

For more information on other cmake directives see https://cmake.org/cmake/help/latest/manual/cmake-variables.7.html.

Once the command line directives are determined, the appropriate command looks like this:

   cmake . -B build -G Ninja \
     -DFREECIV_ENABLE_TOOLS=NO \
     -DFREECIV_ENABLE_SERVER=YES \
     -DCMAKE_BUILD_TYPE=Release \
     -DFREECIV_ENABLE_NLS=NO \
     -DCMAKE_INSTALL_PREFIX=$HOME/Install/Freeciv21

Once the build files have been written, then compile with this command:

   cmake --build build

Once the compilation is complete, install the game with this command:

   cmake --install build

After compilation, the important results are:

  - The "build/freeciv-qt" and "build/freeciv-server" binaries.
  - The "build/data/" directory, which contains the graphics and scenarios.

It's perfectly feasible to play Freeciv21 in this directory, without installing it.

See the README file for more information.

(However you cannot use Internationalization when playing Freeciv21 from the source directory; you must install Freeciv21 for that.)


3. Debian Linux Notes:
======================

Below are all the command line steps needed to start with a fresh install of Debian or its variants (e.g. Ubuntu, Linux Mint) to
install Freeciv21.

   sudo apt install build-dep-freeciv \
     git \
     cmake \
     ninja-build \
     python3 \
     gettext \
     qt5-default \
     libkf5archive-dev \
     libsqlite3-dev \
     libsdl2-mixer-dev \
     libsdl2-dev \
     libmagicwand-dev

   mkdir -p $HOME/GitHub

   cd $HOME/GitHub

   git clone https://github.com/longturn/freeciv21.git

   cd freeciv21

At this point follow the steps in section 2 above.


4. Windows notes:
=================

Windows version of Freeciv21 can be built with Msys2. Microsoft Visual C is under development.

Build instructions for Msys2 versions are documented on doc/README.msys2. Alternately you can visit
https://github.com/jwrober/freeciv-msys2 for ready make scripts.

** END **
